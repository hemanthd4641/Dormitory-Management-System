{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home - Hostel Management System</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">

  <style>
    :root {
      --bg-color: #f8f9fa;
      --text-color: #212529;
      --primary-gradient: linear-gradient(135deg, #007bff, #6610f2);
    }
    body {
      background: var(--bg-color);
      color: var(--text-color);
      transition: background 0.4s ease, color 0.4s ease;
      font-family: "Segoe UI", sans-serif;
    }
    .logo {
      max-width: 100px;
      height: auto;
      margin-top: 20px;
      border-radius: 50%;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    .welcome-section {
      margin-top: 80px;
      text-align: center;
    }
    .welcome-section h1 {
      font-size: 2.5rem;
      font-weight: 700;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: fadeIn 1.2s ease-in-out;
    }
    .theme-toggle {
      position: fixed;
      top: 15px;
      right: 15px;
      border-radius: 50px;
      padding: 8px 16px;
      background: var(--primary-gradient);
      color: white;
      border: none;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    .theme-toggle:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    }
    /* Dark mode variables */
    body.dark-mode {
      --bg-color: #1e1e2f;
      --text-color: #f8f9fa;
      --primary-gradient: linear-gradient(135deg, #17a2b8, #6610f2);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <!-- Dark Mode Toggle Button -->
  <button class="theme-toggle" id="theme-toggle">
    <i class="bi bi-moon-fill me-1" id="theme-icon"></i>
    Dark Mode
  </button>

  {% if request.user.is_authenticated %}
    {% include "navbar.html" %}
  {% endif %}

  {% if not request.user.is_authenticated %}
  <div class="welcome-section">
    <h1>HOSTEL MANAGEMENT SYSTEM</h1>
  </div>
  {% endif %}

  {% block content %}{% endblock content %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');

    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark-mode');
      setDarkMode(true);
    }

    themeToggleBtn.addEventListener('click', () => {
      const isDarkMode = document.body.classList.toggle('dark-mode');
      setDarkMode(isDarkMode);
      localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
    });

    function setDarkMode(isDark) {
      if (isDark) {
        themeIcon.classList.replace('bi-moon-fill', 'bi-sun-fill');
        themeToggleBtn.innerHTML = '<i class="bi bi-sun-fill me-1"></i> Light Mode';
      } else {
        themeIcon.classList.replace('bi-sun-fill', 'bi-moon-fill');
        themeToggleBtn.innerHTML = '<i class="bi bi-moon-fill me-1"></i> Dark Mode';
      }
    }
  </script>
</body>
</html>
